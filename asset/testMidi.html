<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>播放测试</title>
	<script src='https://surikov.github.io/webaudiofont/npm/dist/WebAudioFontPlayer.js'></script>
	<script src='https://surikov.github.io/webaudiofontdata/sound/0000_SoundBlasterOld_sf2.js'></script>
	<script>
		function play() {
			var file = document.getElementById("file").files[0];
			var reader = new FileReader();
			reader.readAsText(file);
			reader.onload = function(event) {
				var result = event.target.result;
				var obj = JSON.parse(result);
				var contents = obj[0]["Contents"];
				var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
				var player = new WebAudioFontPlayer();
				player.loader.decodeAfterLoading(audioCtx, '_tone_0000_SoundBlasterOld_sf2');
				for(var i = 0; i < contents.length; i++) {
					if (contents[i]["Type"] == "Note") {
						player.queueWaveTable(
							audioCtx,
							audioCtx.destination,
							_tone_0000_SoundBlasterOld_sf2,
							contents[i]["StartTime"],
							contents[i]["Pitch"] + 60,
							contents[i]["Duration"],
							contents[i]["Volume"]
						);
					}
				}
			}
		}
	</script>
</head>
<body>
	打开 JSON 文件：<input type="file" id="file">
	<br>
	<button onclick="play()">播放</button>
</body>
</html>
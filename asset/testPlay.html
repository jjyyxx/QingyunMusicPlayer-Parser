<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>播放测试</title>
	<script>
		function play() {
			var file = document.getElementById("file").files[0];
			var reader = new FileReader();
			reader.readAsText(file);
			reader.onload = function(event) {
				var result = event.target.result;
				var obj = JSON.parse(result);
				var contents = obj[0]["Contents"];
				var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
				var gainNode = audioCtx.createGain();
				for(var i = 0; i < contents.length; i++) {
					if (contents[i]["Type"] == "Note") {
						var oscillator = audioCtx.createOscillator();
						oscillator.type = 'sine';
						oscillator.frequency.value = 440 * Math.pow(2, (contents[i]["Pitch"] - 9)/12);
						oscillator.start(contents[i]["StartTime"]);
						oscillator.stop(contents[i]["StartTime"] + contents[i]["Duration"]);
						oscillator.connect(gainNode);
					}
				}
				gainNode.connect(audioCtx.destination);
			}
		}
	</script>
</head>
<body>
	打开 JSON 文件：<input type="file" id="file">
	<br>
	<button onclick="play()">播放</button>
</body>
</html>